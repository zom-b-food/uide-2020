!function(w){w.fn.parallax=function(){var l=w(window).width();return this.each(function(i){var s=w(this);function n(i){var n;n=l<601?0<s.height()?s.height():s.children("img").height():0<s.height()?s.height():500;var t=s.children("img").first(),o=t.height()-n,h=s.offset().top+n,e=s.offset().top,r=w(window).scrollTop(),a=window.innerHeight,c=(r+a-e)/(n+a),d=Math.round(o*c);i&&t.css("display","block"),r<h&&e<r+a&&t.css("transform","translate3D(-50%,"+d+"px, 0)")}s.addClass("parallax"),s.children("img").one("load",function(){n(!0)}).each(function(){this.complete&&w(this).trigger("load")}),w(window).scroll(function(){l=w(window).width(),n(!1)}),w(window).resize(function(){l=w(window).width(),n(!1)})})}}(jQuery);