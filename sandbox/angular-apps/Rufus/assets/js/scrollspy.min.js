!function(h){var u=h(window),p=[],d=[],n=!1,y=0,S={top:0,right:0,bottom:0,left:0};function l(t){++y;var l,a,s,c,f,e=u.scrollTop(),r=u.scrollLeft(),i=r+u.width(),o=e+u.height(),n=(l=e+S.top+t||200,a=i+S.right,s=o+S.bottom,c=r+S.left,f=h(),h.each(p,function(t,e){if(0<e.height()){var r=e.offset().top,i=e.offset().left,o=i+e.width(),n=r+e.height();!(a<i||o<c||s<r||n<l)&&f.push(e)}}),f);h.each(n,function(t,e){"number"!=typeof e.data("scrollSpy:ticks")&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",y)}),h.each(d,function(t,e){var r=e.data("scrollSpy:ticks");"number"==typeof r&&r!==y&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),d=n}function e(){u.trigger("scrollSpy:winSize")}h.scrollSpy=function(t,r){r=h.extend({throttle:100,scrollOffset:200},r);var i=[];(t=h(t)).each(function(t,e){p.push(h(e)),h(e).data("scrollSpy:id",t),h('a[href="#'+h(e).attr("id")+'"]').click(function(t){t.preventDefault();var e=h(Materialize.escapeHash(this.hash)).offset().top+1;h("html, body").animate({scrollTop:e-r.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),S.top=r.offsetTop||0,S.right=r.offsetRight||0,S.bottom=r.offsetBottom||0,S.left=r.offsetLeft||0;var e=Materialize.throttle(function(){l(r.scrollOffset)},r.throttle||100),o=function(){h(document).ready(e)};return n||(u.on("scroll",o),u.on("resize",o),n=!0),setTimeout(o,0),t.on("scrollSpy:enter",function(){i=h.grep(i,function(t){return 0!=t.height()});var t=h(this);i[0]?(h('a[href="#'+i[0].attr("id")+'"]').removeClass("active"),t.data("scrollSpy:id")<i[0].data("scrollSpy:id")?i.unshift(h(this)):i.push(h(this))):i.push(h(this)),h('a[href="#'+i[0].attr("id")+'"]').addClass("active")}),t.on("scrollSpy:exit",function(){if((i=h.grep(i,function(t){return 0!=t.height()}))[0]){h('a[href="#'+i[0].attr("id")+'"]').removeClass("active");var e=h(this);(i=h.grep(i,function(t){return t.attr("id")!=e.attr("id")}))[0]&&h('a[href="#'+i[0].attr("id")+'"]').addClass("active")}}),t},h.winSizeSpy=function(t){return h.winSizeSpy=function(){return u},t=t||{throttle:100},u.on("resize",Materialize.throttle(e,t.throttle||100))},h.fn.scrollSpy=function(t){return h.scrollSpy(h(this),t)}}(jQuery);