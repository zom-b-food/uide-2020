!function(w){w.fn.materialbox=function(){return this.each(function(){if(!w(this).hasClass("initialized")){w(this).addClass("initialized");var u,p,h=!1,f=!0,v=275,a=200,m=w(this),e=w("<div></div>").addClass("material-placeholder"),o=m.attr("style");m.wrap(e),m.on("click",function(){var e=m.parent(".material-placeholder"),t=window.innerWidth,i=window.innerHeight,a=m.width(),o=m.height();if(!1===f)return g(),!1;if(h&&!0===f)return g(),!1;f=!1,m.addClass("active"),h=!0,e.css({width:e[0].getBoundingClientRect().width,height:e[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),u=void 0,p=e[0].parentNode;for(;null!==p&&!w(p).is(document);){var n=w(p);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),u=void 0===u?n:u.add(n)),p=p.parentNode}m.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",a).data("height",o);var l=w('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===f&&g()});m.before(l);var d=l[0].getBoundingClientRect();if(l.css({width:t,height:i,left:-1*d.left,top:-1*d.top}),l.velocity({opacity:1},{duration:v,queue:!1,easing:"easeOutQuad"}),""!==m.data("caption")){var c=w('<div class="materialbox-caption"></div>');c.text(m.data("caption")),w("body").append(c),c.css({display:"inline"}),c.velocity({opacity:1},{duration:v,queue:!1,easing:"easeOutQuad"})}var s=0,r=0;r=o/i<a/t?(s=.9*t)*(o/a):(s=.9*i*(a/o),.9*i),m.hasClass("responsive-img")?m.velocity({"max-width":s,width:a},{duration:0,queue:!1,complete:function(){m.css({left:0,top:0}).velocity({height:r,width:s,left:w(document).scrollLeft()+t/2-m.parent(".material-placeholder").offset().left-s/2,top:w(document).scrollTop()+i/2-m.parent(".material-placeholder").offset().top-r/2},{duration:v,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}}):m.css("left",0).css("top",0).velocity({height:r,width:s,left:w(document).scrollLeft()+t/2-m.parent(".material-placeholder").offset().left-s/2,top:w(document).scrollTop()+i/2-m.parent(".material-placeholder").offset().top-r/2},{duration:v,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}),w(window).scroll(function(){h&&g()}),w(document).keyup(function(e){27===e.keyCode&&!0===f&&h&&g()})}function g(){f=!1;var e=m.parent(".material-placeholder"),t=(window.innerWidth,window.innerHeight,m.data("width")),i=m.data("height");m.velocity("stop",!0),w("#materialbox-overlay").velocity("stop",!0),w(".materialbox-caption").velocity("stop",!0),w("#materialbox-overlay").velocity({opacity:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){h=!1,w(this).remove()}}),m.velocity({width:t,height:i,left:0,top:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){e.css({height:"",width:"",position:"",top:"",left:""}),m.removeAttr("style"),m.attr("style",o),m.removeClass("active"),f=!0,u&&u.css("overflow","")}}),w(".materialbox-caption").velocity({opacity:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){w(this).remove()}})}})},w(document).ready(function(){w(".materialboxed").materialbox()})}(jQuery);