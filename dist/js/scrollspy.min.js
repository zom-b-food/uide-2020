!function(h){var a=h(window),u=[],l=[],n=!1,s=0,c={top:0,right:0,bottom:0,left:0};function f(t){++s;var e=a.scrollTop(),r=a.scrollLeft(),i=r+a.width(),o=e+a.height(),n=function(a,l,s,c){var f=h();return h.each(u,function(t,e){if(0<e.height()){var r=e.offset().top,i=e.offset().left,o=i+e.width(),n=r+e.height();!(l<i||o<c||s<r||n<a)&&f.push(e)}}),f}(e+c.top+t||200,i+c.right,o+c.bottom,r+c.left);h.each(n,function(t,e){"number"!=typeof e.data("scrollSpy:ticks")&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",s)}),h.each(l,function(t,e){var r=e.data("scrollSpy:ticks");"number"==typeof r&&r!==s&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),l=n}function e(){a.trigger("scrollSpy:winSize")}h.scrollSpy=function(t,r){r=h.extend({throttle:100,scrollOffset:200},r);var i=[];(t=h(t)).each(function(t,e){u.push(h(e)),h(e).data("scrollSpy:id",t),h('a[href="#'+h(e).attr("id")+'"]').click(function(t){t.preventDefault();var e=h(Materialize.escapeHash(this.hash)).offset().top+1;h("html, body").animate({scrollTop:e-r.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),c.top=r.offsetTop||0,c.right=r.offsetRight||0,c.bottom=r.offsetBottom||0,c.left=r.offsetLeft||0;function e(){h(document).ready(o)}var o=Materialize.throttle(function(){f(r.scrollOffset)},r.throttle||100);return n||(a.on("scroll",e),a.on("resize",e),n=!0),setTimeout(e,0),t.on("scrollSpy:enter",function(){i=h.grep(i,function(t){return 0!=t.height()});var t=h(this);i[0]?(h('a[href="#'+i[0].attr("id")+'"]').removeClass("active"),t.data("scrollSpy:id")<i[0].data("scrollSpy:id")?i.unshift(h(this)):i.push(h(this))):i.push(h(this)),h('a[href="#'+i[0].attr("id")+'"]').addClass("active")}),t.on("scrollSpy:exit",function(){if((i=h.grep(i,function(t){return 0!=t.height()}))[0]){h('a[href="#'+i[0].attr("id")+'"]').removeClass("active");var e=h(this);(i=h.grep(i,function(t){return t.attr("id")!=e.attr("id")}))[0]&&h('a[href="#'+i[0].attr("id")+'"]').addClass("active")}}),t},h.winSizeSpy=function(t){return h.winSizeSpy=function(){return a},t=t||{throttle:100},a.on("resize",Materialize.throttle(e,t.throttle||100))},h.fn.scrollSpy=function(t){return h.scrollSpy(h(this),t)}}(jQuery);